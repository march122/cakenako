;/*FB_PKG_DELIM*/

__d("GroupsCometChatsEngagementLoggerWithDefaultExport",["GroupsCometChatsEngagementLogger"],(function(a,b,c,d,e,f,g){"use strict";a={log:d("GroupsCometChatsEngagementLogger").log};g["default"]=a}),98);
__d("LSDeleteMessage",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(12).fetch([[[a[1]]],"messageId"]),function(c){return c.messageId===a[1]&&b.i64.eq(c.threadKey,a[0])}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxDeleteMessageStoredProcedure";e.exports=a}),null);
__d("LSOptimisticUpdateThreadDisappearingSetting",["LSIssueNewError","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.sortBy(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[0]=!1:(b=a.item,d[0]=b.errorShouldBeShown)})},function(a){return d[0]===!0?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2285622730]),void 0).then(function(a){return d[4]=a})},function(a){return c.localizeV2Async(c.i64.cast([0,1919524925]),void 0).then(function(a){return d[5]=a})},function(a){return c.storedProcedure(b("LSIssueNewError"),void 0,c.i64.cast([0,1545093]),d[4],d[5],void 0,void 0)}]):c.resolve()},function(e){return d[2]=new c.Map(),d[2].set("wa_jid",void 0),d[2].set("thread_key",a[0]),d[2].set("disappearing_ttl",a[1]),d[2].set("updated_timestamp",a[2]),d[2].set("updated_by",a[3]),d[2].set("sync_group",c.i64.cast([0,95])),d[3]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),"disappearing_setting",c.i64.cast([0,714]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticUpdateThreadDisappearingSettingStoredProcedure";e.exports=a}),null);
__d("LSOptimisticUpdateThreadDisappearingSettingStoredProcedure",["LSOptimisticUpdateThreadDisappearingSetting","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){b===void 0&&(b={});return c("LSOptimisticUpdateThreadDisappearingSetting")(b.threadKey,b.disappearingTtl,b.updatedTimestamp,b.updatedBy,a)}g["default"]=a}),98);
__d("LSSetPinnedMessage",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("message_id",a[1]),d[0].set("pinned_message_state",a[3]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"set_pinned_message_search",c.i64.cast([0,751]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(b){return c.i64.eq(a[3],c.i64.cast([0,1]))?c.sequence([function(b){return c.forEach(c.db.table(205).fetch([[[a[0],a[1]]]]),function(a){return a["delete"]()})},function(b){return c.forEach(c.filter(c.db.table(205).fetch([[[a[0],a[1],a[2]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&b.messageId===a[1]&&c.i64.eq(b.pinnedTimestampMs,a[2])&&c.i64.lt(b.authorityLevel,c.i64.cast([0,80]))}),function(a){return a["delete"]()})},function(b){return c.db.table(205).add({threadKey:a[0],messageId:a[1],pinnedTimestampMs:a[2],authorityLevel:c.i64.cast([0,80])})}]):c.forEach(c.db.table(205).fetch([[[a[0],a[1]]]]),function(a){return a["delete"]()})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxSetPinnedMessageStoredProcedure";e.exports=a}),null);
__d("LsMessageClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743853");b=d("FalcoLoggerInternal").create("ls_message_click",a);e=b;g["default"]=e}),98);
__d("MAWDownloadMediaInWorker",["I64","LSAuthorityLevel","LSIntEnum","LSXmaContentType","MAWBridgeFireAndForget","MAWBridgeSendAndReceive","MAWDbMedia","MAWDbXMA","MAWGetIsMediaDownloadStatusEnabled","WAHashUtils","gkx","justknobx","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=a.attachment,d=a.dispatch,e=a.mediaRenderQpl;a=a.triggerUIView;if(l(b))return;j({attachment:c("nullthrows")(b),dispatch:d,mediaRenderQpl:e,triggerUIView:a})}function j(a){var b=a.attachment,e=a.dispatch,f=a.mediaRenderQpl;a=a.triggerUIView;f==null?void 0:f.addPoint("download_media_in_worker_start");d("MAWGetIsMediaDownloadStatusEnabled").getIsMediaDownloadStatusEnabled()&&e({tag:"SetMediaDownloadStatusState",value:{key:isNaN(b.attachmentFbid)?d("WAHashUtils").stringToPlaintextHash(b.attachmentFbid):d("MAWDbMedia").convertNumberToMediaId(parseInt(b.attachmentFbid,10)),newMediaDownloadState:null}});e=m(b,a);d("MAWGetIsMediaDownloadStatusEnabled").getIsMediaDownloadStatusEnabled()&&c("justknobx")._("3243")?void d("MAWBridgeFireAndForget").fireAndForget("backend","downloadMediaForUI",e):void d("MAWBridgeSendAndReceive").sendAndReceive("backend","downloadMediaForUI",e).then(function(a){if(a.success){f==null?void 0:f.addPoint("download_media_in_worker_end");return}f==null?void 0:f.addPoint("download_media_in_worker_fail",{string:{download_media_in_worker_fail_reason:(a=a.error)!=null?a:"unknown"}})})["catch"](function(a){f==null?void 0:f.addPoint("download_media_in_worker_fail",{string:{download_media_in_worker_fail_reason:(a=a.name)!=null?a:"unknown"}})})}function b(a){var b=a.attachmentsWithQpl,c=a.dispatch;a=a.triggerUIView;b=b.filter(function(a){return!l(a.attachment)});k({attachmentsWithQpl:b,dispatch:c,triggerUIView:a})}function k(a){var b=a.attachmentsWithQpl,e=a.dispatch,f=a.triggerUIView;a=b.map(function(a){var b=a.attachment;a=a.mediaRenderQpl;a==null?void 0:a.addPoint("download_media_in_worker_start");d("MAWGetIsMediaDownloadStatusEnabled").getIsMediaDownloadStatusEnabled()&&e({tag:"SetMediaDownloadStatusState",value:{key:isNaN(b.attachmentFbid)?d("WAHashUtils").stringToPlaintextHash(b.attachmentFbid):d("MAWDbMedia").convertNumberToMediaId(parseInt(b.attachmentFbid,10)),newMediaDownloadState:null}});return m(b,f)});if(d("MAWGetIsMediaDownloadStatusEnabled").getIsMediaDownloadStatusEnabled()&&c("justknobx")._("3243"))void d("MAWBridgeFireAndForget").fireAndForget("backend","bulkDownloadMediaForUI",{media:a});else{var g=new Map(b.map(function(a){var b=a.attachment;a=a.mediaRenderQpl;return[b.attachmentFbid,a]}));void d("MAWBridgeSendAndReceive").sendAndReceive("backend","bulkDownloadMediaForUI",{media:a}).then(function(a){a.forEach(function(a){var b=a.arg;a=a.result;b=b.type==="xmaId"?String(b.xmaId):b.type==="mediaId"?String(b.mediaId):b.plaintextHash;b=g.get(b);if(a.success){b==null?void 0:b.addPoint("download_media_in_worker_end");return}b==null?void 0:b.addPoint("download_media_in_worker_fail",{string:{download_media_in_worker_fail_reason:(b=a.error)!=null?b:"unknown"}})})})["catch"](function(a){b.forEach(function(b){(b=b.mediaRenderQpl)==null?void 0:b.addPoint("download_media_in_worker_fail",{string:{download_media_in_worker_fail_reason:(b=a.name)!=null?b:"unknown"}})})})}}function l(a){return a==null||a.hasMedia===!0&&!d("MAWGetIsMediaDownloadStatusEnabled").getIsMediaDownloadStatusEnabled()||(h||(h=d("I64"))).equal(a.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC))||(a==null?void 0:a.hasXma)===!0&&(a==null?void 0:a.xmaContentType)!=null&&(h||(h=d("I64"))).equal(a.xmaContentType,(i||(i=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").MSG_RECEIVER_FETCH))||(a==null?void 0:a.hasXma)===!0&&(a==null?void 0:a.hasXmaPreview)!==!0||a.receiverFetchId!=null||c("gkx")("4137")!==!0}function m(a,b){var c=a.attachmentFbid,e=a.hasXma;return e?{triggerUIView:b,type:"xmaId",xmaId:d("MAWDbXMA").convertNumberToXMAId(Number.parseInt(a.attachmentFbid,10))}:{plaintextHash:d("WAHashUtils").stringToPlaintextHash(c),triggerUIView:b,type:"plaintextHash"}}g.maybeDownloadMediaInWorker=a;g.downloadMediaInWorker=j;g.maybeBulkDownloadMediaInWorker=b;g.bulkDownloadMediaInWorker=k}),98);
__d("MAWEphemeralMsgAutoResetSystemId",[],(function(a,b,c,d,e,f){"use strict";a="-111111";b=a;f["default"]=b}),66);
__d("MAWEphemeralSettingsUpdate",["FBLogger","I64","LSOptimisticUpdateThreadDisappearingSettingStoredProcedure","MAWChatJid","MAWCurrentUser","MAWEphemeralMsgAutoResetSystemId","Promise","asyncToGeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("MAWEphemeralSettingsUpdate"),k=c("requireDeferred")("LSFactory").__setRef("MAWEphemeralSettingsUpdate"),l=c("requireDeferred")("WATimeUtils").__setRef("MAWEphemeralSettingsUpdate");function m(a,b,c,d){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){a=(yield a.threads.get(e));if(a!=null){e=a.disappearingSettingUpdatedTs;a=a.disappearingSettingTtl;if(e==null||a==null)return!0;if((i||(i=d("I64"))).lt(e,(i||(i=d("I64"))).of_float(c))&&!(i||(i=d("I64"))).equal(a,(i||(i=d("I64"))).of_int32(b)))return!0}return!1});return n.apply(this,arguments)}function o(a,b,c,d,e,f,g){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,j,l,n){var o=(yield m(a,e,f,j));if(!o)return(h||(h=b("Promise"))).resolve();l&&c("FBLogger")("labyrinth_web").addMetadata("LABYRINTH_WEB","APP_VERSION","OCCAM_EPHEMERAL_SETTINGS_UPDATE").info("[Occam][Web] Ephemeral Settings Updated.");o=(yield k.load());return c("LSOptimisticUpdateThreadDisappearingSettingStoredProcedure")(o(a),{disappearingTtl:(i||(i=d("I64"))).of_int32(e),threadKey:j,updatedBy:i.of_string(g?c("MAWEphemeralMsgAutoResetSystemId"):(l=n)!=null?l:d("MAWCurrentUser").getID()),updatedTimestamp:i.of_float(f)})});return p.apply(this,arguments)}function a(a,b,c,d){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d){var e=(yield j.load());e=(yield e());return e.runInTransaction(function(e){return o(e,a,b,c,d,!1)},"readwrite")});return q.apply(this,arguments)}function e(a,b,c,d,e){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f,g){var i=(yield j.load());i=(yield i());return i.runInTransaction(function(){var i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(i){var j=(yield d("MAWChatJid").toThreadKeyMaybe(i,f));return j!=null?o(i,a,(yield l.load()).castUnixTimeToMillisTime(c),e,j,g):(h||(h=b("Promise"))).resolve()});return function(a){return i.apply(this,arguments)}}(),"readwrite")});return r.apply(this,arguments)}g.updateEphemeralSettingsWithTxn=o;g.updateEphemeralSettings=a;g.updateEphemeralSettingsByChatJid=e}),98);
__d("MWChatMessageBothOrientationFocusGroup.react",["fbt","CometComponentWithKeyCommands.react","CometKeys","FocusGroup.react","emptyFunction","focusScopeQueries","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;b=d("FocusGroup.react").createFocusGroup(d("focusScopeQueries").tabbableScopeQuery);e=b[0];f=b[1];d={key:c("CometKeys").UP};b={key:c("CometKeys").DOWN};var l={key:c("CometKeys").LEFT},m={key:c("CometKeys").RIGHT},n=[{command:d,description:h._("__JHASH__HYvhkJNYo2M__JHASH__"),handler:c("emptyFunction")},{command:b,description:h._("__JHASH__6tFY25IlnV4__JHASH__"),handler:c("emptyFunction")},{command:l,description:h._("__JHASH__6tFY25IlnV4__JHASH__"),handler:c("emptyFunction")},{command:m,description:h._("__JHASH__HYvhkJNYo2M__JHASH__"),handler:c("emptyFunction")}];function a(a){var b=j(2);a=a.children;var d;b[0]!==a?(d=k.jsx(c("CometComponentWithKeyCommands.react"),{commandConfigs:n,xstyle:!1,children:a}),b[0]=a,b[1]=d):d=b[1];return d}d=a;g.FocusGroup=e;g.FocusGroupItem=f;g.keyCommands=d}),226);
__d("MlsMessageActionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1401");b=d("FalcoLoggerInternal").create("mls_message_action",a);e=b;g["default"]=e}),98);
__d("MWLogMessageAction",["I64","MWLSContactTypeExactUtils","MlsMessageActionFalcoEvent","ReQL","asyncToGeneratorRuntime","coerceMessagingThreadTypeToLSThreadType"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c,d,e,f,g,h,j,k,l){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,i,j,k,l,m,n){var o,p=(yield (o=d("ReQL")).firstAsync(o.fromTableAscending(a.tables.threads).getKeyRange(e))),q=(yield o.toArrayAsync(o.fromTableAscending(a.tables.participants).getKeyRange(e))),r=(yield o.firstAsync(o.mergeJoin(o.fromTableAscending(a.tables.participants).getKeyRange(e),o.fromTableAscending(a.tables.contacts)).filter(function(a){a[0];a=a[1].contactTypeExact;return d("MWLSContactTypeExactUtils").isIgContact(a)})))!=null;p!=null&&c("MlsMessageActionFalcoEvent").log(function(){var a;return{action:g,browser_window_height:window.innerHeight,browser_window_width:window.innerWidth,device_screen_height:window.screen.height,device_screen_width:window.screen.width,error_text:j,extra:i,group_size:String(q.length),is_xac_thread:r,ls_thread_type:c("coerceMessagingThreadTypeToLSThreadType")(p.threadType),message_type:(a=m)!=null?a:"text",mid:b,reaction:k,recipient_id:l!=null?(h||(h=d("I64"))).to_string(l):void 0,sender_id:(h||(h=d("I64"))).to_string(n),source:f,thread_id:h.to_string(e)}})});return i.apply(this,arguments)}e={log:a};g["default"]=e}),98);
__d("MWPReplyLogging",["I64","QPLUserFlow","deepEquals","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map();function j(a){var b=Date.now()|0;i.set((h||(h=d("I64"))).to_string(a),b);return b}function k(a){var b=i.get((h||(h=d("I64"))).to_string(a));if(b==null)return j(a);else return b}function a(a,b,e){if(e){a?c("QPLUserFlow").endCancel(c("qpl")._(25298086,"3996"),{instanceKey:k(b)}):c("QPLUserFlow").endSuccess(c("qpl")._(25298086,"3996"),{instanceKey:k(b)});i["delete"]((h||(h=d("I64"))).to_string(b));return}}function b(a,b,d){if(a!=null){if(c("deepEquals")(a,b)){c("QPLUserFlow").addPoint(c("qpl")._(25298086,"3996"),"same_message",{instanceKey:k(d)});return}if(!c("deepEquals")(a,b)){a=k(d);c("QPLUserFlow").addPoint(c("qpl")._(25298086,"3996"),"switch_message",{instanceKey:a});c("QPLUserFlow").endCancel(c("qpl")._(25298086,"3996"),{instanceKey:a});c("QPLUserFlow").start(c("qpl")._(25298086,"3996"),{cancelOnUnload:!0,instanceKey:j(d),timeoutInMs:6e4});return}}c("QPLUserFlow").start(c("qpl")._(25298086,"3996"),{cancelOnUnload:!0,instanceKey:j(d),timeoutInMs:6e4})}e={logClearReply:a,logSetReply:b};g["default"]=e}),98);
__d("MessageRequestsBulkActionConfirmedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("256");b=d("FalcoLoggerInternal").create("message_requests_bulk_action_confirmed",a);e=b;g["default"]=e}),98);
__d("MessageRequestsBulkActionEditFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2614");b=d("FalcoLoggerInternal").create("message_requests_bulk_action_edit",a);e=b;g["default"]=e}),98);
__d("MessageRequestsBulkActionTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("257");b=d("FalcoLoggerInternal").create("message_requests_bulk_action_tapped",a);e=b;g["default"]=e}),98);
__d("MessageRequestsInfoBannerShownFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("258");b=d("FalcoLoggerInternal").create("message_requests_info_banner_shown",a);e=b;g["default"]=e}),98);
__d("MessageRequestsThreadActionConfirmedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("259");b=d("FalcoLoggerInternal").create("message_requests_thread_action_confirmed",a);e=b;g["default"]=e}),98);
__d("MessageRequestsThreadActionTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("260");b=d("FalcoLoggerInternal").create("message_requests_thread_action_tapped",a);e=b;g["default"]=e}),98);
__d("MessageRequestsThreadDenialOptionsTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("261");b=d("FalcoLoggerInternal").create("message_requests_thread_denial_options_tapped",a);e=b;g["default"]=e}),98);
__d("MessageRequestsViewThreadlistFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("263");b=d("FalcoLoggerInternal").create("message_requests_view_threadlist",a);e=b;g["default"]=e}),98);
__d("MessengerDiscoverableBroadcastChatsClientEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4148");b=d("FalcoLoggerInternal").create("messenger_discoverable_broadcast_chats_client_events",a);e=b;g["default"]=e}),98);
__d("SoundPlayer",["ODS","URI","createArrayFromMixed"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new Map();function k(a){var b=new(i||(i=c("URI")))(a);return b.getDomain()?a:new(i||(i=c("URI")))(window.location.href).setPath(b.getPath()).toString()}function l(a){a=new(i||(i=c("URI")))(a).getPath();if(/\.mp3$/.test(a))return"audio/mpeg";return/\.og[ga]$/.test(a)?"audio/ogg":""}var m=function(a,b){for(var a=c("createArrayFromMixed")(a),d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;if(j.has(f))return;var g=document.createElement("audio");if(!g||!g.canPlayType||!g.canPlayType(l(f)))continue;g.preload="auto";g.src=k(f);document.body&&document.body.appendChild(g);j.set(f,g);(b==null?void 0:b.onPreload)!=null&&b.onPreload(g);return}};a=function(a,b){b===void 0&&(b={});for(var a=c("createArrayFromMixed")(a),e=Array.isArray(a),f=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=a.length)break;g=a[f++]}else{f=a.next();if(f.done)break;g=f.value}g=g;j.has(g)||m(g,b.callbacks);g=j.get(g);if(!g)continue;b.loop&&g.setAttribute("loop","");b.volume&&(g.volume=b.volume);g=g.play();g!=null&&typeof g.then==="function"?g.then(function(a){(h||(h=d("ODS"))).bumpEntityKey(2966,"sound_player","play.success")})["catch"](function(a){(h||(h=d("ODS"))).bumpEntityKey(2966,"sound_player","play.error")}):(h||(h=d("ODS"))).bumpEntityKey(2966,"sound_player","non_promise");return}};b=function(a){for(var a=c("createArrayFromMixed")(a),b=Array.isArray(a),d=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(b){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=j.get(e);if(e){e.pause();return}}};e=function(a){for(var a=c("createArrayFromMixed")(a),b=Array.isArray(a),d=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(b){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f=j.get(e);f&&(f.pause(),f.removeAttribute("src"),f.src=k(e))}};g.preload=m;g.play=a;g.pause=b;g.stop=e}),98);
__d("SoundSynchronizer",["SoundPlayer","WebStorage","createArrayFromMixed"],(function(a,b,c,d,e,f){var g,h="fb_sounds_playing3";function i(){var a=(g||(g=b("WebStorage"))).getLocalStorage();if(a)try{a=a[h];if(a){a=JSON.parse(a);if(Array.isArray(a))return a}}catch(a){}return[]}function j(a){var c=(g||(g=b("WebStorage"))).getLocalStorage();if(c){var d=i();d.push(a);while(d.length>5)d.shift();try{c[h]=JSON.stringify(d)}catch(a){}}}function k(a){return i().some(function(b){return b===a})}a={play:function(a,c,d,e){a=b("createArrayFromMixed")(a);c=c||a[0]+Math.floor(Date.now()/1e3);if(k(c))return;b("SoundPlayer").play(a,{loop:!!d,callbacks:e});j(c)},isSupported:function(){return!!(g||(g=b("WebStorage"))).getLocalStorage()}};e.exports=a}),null);
__d("SoundRPC",["FBJSON","SecurePostMessage","SoundSynchronizer","cr:950105"],(function(a,b,c,d,e,f,g){function h(a,b,c,e){d("SoundSynchronizer").play(a,b,c,e)}function a(a,b,c,e){b={name:"SoundRPC",data:{paths:b,sync:c,loop:e}};d("SecurePostMessage").sendMessageAllowAnyOrigin_UNSAFE(a,d("FBJSON").stringify(b))}function c(){return!!window.postMessage}function e(){var a=function(a){if(!/\.facebook.com$/.test(a.origin))return;var b={};try{a=a.data;typeof a==="string"&&(b=d("FBJSON").parse(a))}catch(a){}a=b;b=a.name;a=a.data;b==="SoundRPC"&&a!=null&&typeof a==="object"&&h(a.paths,a.sync,a.loop)};b("cr:950105")!=null?b("cr:950105").listen(window,"message",a):window.addEventListener("message",a)}g.playLocal=h;g.playRemote=a;g.supportsRPC=c;g._listen=e}),98);
__d("Sound",["SoundInitialData","SoundPlayer","SoundRPC","SoundSynchronizer","URI","UserAgent_DEPRECATED","Visibility","isFacebookURI"],(function(a,b,c,d,e,f,g){var h,i=null,j=!1;function a(a){}function k(a,b,c,e){i?d("SoundRPC").playRemote(i.contentWindow,a,b,!1):d("SoundRPC").playLocal(a,b,c,e),j=!0}function b(){return j}function e(a,b,d){if(!j&&c("Visibility").isHidden())return;k(a,b,d)}function f(a){i||d("SoundPlayer").stop(a)}var l=new(h||c("URI"))(location.href),m=new Set(["comet","www","business"]);l.getSubdomain()&&!m.has(l.getSubdomain())&&l.setSubdomain("www");m=l.getDomain();function n(){if(d("UserAgent_DEPRECATED").ie()<9)return!1;return c("SoundInitialData").RPC_DISABLED?!1:d("SoundSynchronizer").isSupported()&&d("SoundRPC").supportsRPC()}c("isFacebookURI")(l)&&location.host!==m&&n()&&(i=document.createElement("iframe"),i.setAttribute("src","//"+m+"/sound_iframe.php"),i.style.display="none",document.body&&document.body.appendChild(i));g.init=a;g.play=k;g.hasPlayedSoundBefore=b;g.playOnlyIfImmediate=e;g.stop=f}),98);/*FB_PKG_DELIM*/
__d("CometMarketplaceConfirmMarkAsPaidDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5436864742990701"}),null);
__d("LSArrayRemoveObjectAt",["I64","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,c,e,f){return(i||(i=b("Promise"))).resolve([e.splice((h||(h=d("I64"))).to_int32(f),1)])}g.call=a}),98);
__d("LSClearCommunityMembersRangeTable",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return a[1]!==void 0?c[0]=a[1]:c[0]="",b.i64.neq(a[0],void 0)?c[1]=!1:c[1]=!0,b.forEach(b.filter(b.db.table(189).fetch(),function(d){return(c[1]||b.i64.eq(d.source,a[0]))&&d.requestId===c[0]}),function(a){return a["delete"]()})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxClearCommunityMembersRangeTableStoredProcedure";e.exports=a}),null);
__d("LSClearCommunityMembersTable",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return a[1]!==void 0?c[0]=a[1]:c[0]="",b.i64.neq(a[0],void 0)?c[1]=!1:c[1]=!0,b.i64.neq(a[2],void 0)?b.forEach(b.filter(b.db.table(170).fetch(),function(d){return(c[1]||b.i64.eq(d.source,a[0]))&&b.i64.eq(d.groupThreadId,a[2])&&d.requestId===c[0]}),function(a){return a["delete"]()}):b.forEach(b.filter(b.db.table(170).fetch(),function(d){return(c[1]||b.i64.eq(d.source,a[0]))&&d.requestId===c[0]}),function(a){return a["delete"]()})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxClearCommunityMembersTableStoredProcedure";e.exports=a}),null);
__d("LSClearCommunityMembersAndRange",["LSClearCommunityMembersRangeTable","LSClearCommunityMembersTable"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(d){return c.sequence([function(d){return c.storedProcedure(b("LSClearCommunityMembersTable"),a[0],a[1],a[2])},function(d){return c.storedProcedure(b("LSClearCommunityMembersRangeTable"),a[0],a[1])}])},function(a){return c.resolve(d)}])}a.__sproc_name__="LSMailboxClearCommunityMembersAndRangeStoredProcedure";e.exports=a}),null);
__d("LSCollapseAttachments",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.islc(b.sortBy(b.db.table(16).fetch([[[a[0],a[1]]],"idx_attachments_collapsible_id"]),[["timestampMs","DESC"]]),0,b.i64.to_float(b.i64.cast([0,1]))).next().then(function(d,e){var f=d.done;d=d.value;return f?0:(e=d.item,b.sequence([function(d){return c[0]=e.messageId,b.forEach(b.db.table(16).fetch([[[a[0],a[1],{lt:c[0]}],[a[0],a[1],{gt:c[0]}]],"idx_attachments_collapsible_id"]),function(a){var c=a.item;return b.forEach(b.filter(b.db.table(12).fetch([[[c.threadKey,c.timestampMs,c.messageId]]]),function(a){return b.i64.eq(a.threadKey,c.threadKey)&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(a.timestampMs,c.timestampMs)&&a.messageId===c.messageId}),function(a){var b=a.update;a.item;return b({isCollapsed:!0})})})},function(a){return b.forEach(b.filter(b.db.table(12).fetch([[[e.threadKey,e.timestampMs,c[0]]]]),function(a){return b.i64.eq(a.threadKey,e.threadKey)&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(a.timestampMs,e.timestampMs)&&a.messageId===c[0]}),function(a){var b=a.update;a.item;return b({isCollapsed:!1})})}]))})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxCollapseAttachmentsStoredProcedure";e.exports=a}),null);
__d("LSFetchBanners",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"in_thread_banner_fetch_activity_banners_queue",c.i64.cast([0,72]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSInThreadBannerFetchBannersStoredProcedure";e.exports=a}),null);
__d("LSGenerateTraceId",["LSRequestId","MetaConfig"],(function(a,b,c,d,e,f,g){"use strict";function a(){if(c("MetaConfig")._("62"))return c("LSRequestId").generate();else return void 0}g["default"]=a}),98);
__d("LSGetFirstAvailableAttachmentCTAID",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(a){return b.sequence([function(a){return b.db.table(19).fetchDesc().next().then(function(a,d){var e=a.done;a=a.value;return e?c[0]=b.i64.cast([0,1]):(d=a.item,c[0]=b.i64.add(d.ctaId,b.i64.cast([0,1])))})},function(a){return d[0]=c[0]}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxGetFirstAvailableAttachmentCTAIDStoredProcedure";e.exports=a}),null);
__d("LSInsertAttachmentItem",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(18).add({attachmentFbid:a[0],attachmentIndex:a[1],threadKey:a[2],messageId:a[4],defaultActionEnableExtensions:a[31],originalPageSenderId:a[7],titleText:a[8],subtitleText:a[9],bodyText:a[12],playableUrl:a[13],playableUrlFallback:a[14],playableUrlExpirationTimestampMs:a[15],playableUrlMimeType:a[16],dashManifest:a[17],previewUrl:a[18],previewUrlFallback:a[19],previewUrlExpirationTimestampMs:a[20],previewUrlMimeType:a[21],previewWidth:a[22],previewHeight:a[23],imageUrl:a[24],defaultCtaId:a[25],defaultCtaTitle:a[26],defaultCtaType:a[27],defaultButtonType:a[29],defaultActionUrl:a[30],defaultWebviewHeightRatio:a[33],attachmentCta1Id:a[35],cta1Title:a[36],cta1IconType:a[37],cta1Type:a[38],attachmentCta2Id:a[40],cta2Title:a[41],cta2IconType:a[42],cta2Type:a[43],attachmentCta3Id:a[45],cta3Title:a[46],cta3IconType:a[47],cta3Type:a[48],faviconUrl:a[49],faviconUrlFallback:a[50],faviconUrlExpirationTimestampMs:a[51],previewUrlLarge:a[52]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxInsertAttachmentItemStoredProcedure";e.exports=a}),null);
__d("LSUpdateMessageSubThreadKey",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(12).fetch([[[a[0]]],"messageId"]),function(b){var c=b.update;b.item;return c({subthreadKey:a[1]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateMessageSubThreadKeyStoredProcedure";e.exports=a}),null);
__d("LSUpdateOrInsertReactionV2",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.db.table(226).fetch([[[a[0],a[1],a[2]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?b.db.table(12).fetch([[[a[1]]],"messageId"]).next().then(function(d,e){var c=d.done;d=d.value;return c?0:(e=d.item,b.sequence([function(c){return b.forEach(b.filter(b.db.table(226).fetch([[[a[0],a[1],a[2]]],"optimistic"]),function(c){return b.i64.eq(c.threadKey,a[0])&&c.messageId===a[1]&&b.i64.eq(c.reactionFbid,a[2])&&b.i64.lt(c.authorityLevel,a[5])}),function(a){return a["delete"]()})},function(c){return b.db.table(226).add({messageId:a[1],threadKey:a[0],reactionFbid:a[2],messageTimestamp:e.timestampMs,authorityLevel:a[5],count:a[4],viewerIsReactor:a[6],viewerReactionTimestampMs:a[7],lastUpdatedTimestampMs:a[8]})}]))}):(e=d.item,c[2]=e.lastUpdatedTimestampMs,c[1]=e.authorityLevel,b.i64.eq(a[5],b.i64.cast([0,20]))||b.i64.eq(c[1],b.i64.cast([0,80]))&&b.i64.eq(a[5],b.i64.cast([0,80]))||b.i64.eq(c[1],b.i64.cast([0,20]))&&b.i64.eq(a[5],b.i64.cast([0,80]))&&b.i64.le(b.i64.add(c[2],b.i64.cast([0,2e3])),a[8])||b.i64.eq(c[1],b.i64.cast([0,20]))&&b.i64.eq(a[5],b.i64.cast([0,60]))||b.i64.eq(c[1],b.i64.cast([0,60]))&&b.i64.eq(a[5],b.i64.cast([0,80]))&&b.i64.le(c[2],a[8])?c[3]=!0:c[3]=!1,c[3]?b.db.table(226).put({messageId:a[1],threadKey:a[0],reactionFbid:a[2],messageTimestamp:e.messageTimestamp,reactionLiteral:a[3],count:a[4],authorityLevel:a[5],viewerIsReactor:a[6],viewerReactionTimestampMs:b.i64.cast([0,0]),lastUpdatedTimestampMs:a[8]}):b.resolve())})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxUpdateOrInsertReactionV2StoredProcedure";e.exports=a}),null);
__d("LSUpsertReaction",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(8).put({threadKey:a[0],messageId:a[2],actorId:a[3],timestampMs:a[1],reaction:a[4],authorityLevel:a[5],reactionCreationTimestampMs:a[6]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpsertReactionStoredProcedure";e.exports=a}),null);
__d("LSWriteCTAIdToThreadsTable",["LSGetFirstAvailableAttachmentCTAID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return a[1]===void 0?c.forEach(c.filter(c.db.table(9).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&(c.i64.neq(b.lastMessageCtaId,void 0)||b.lastMessageCtaType!==void 0)}),function(b){var c=b.update;b.item;return c({lastMessageCtaId:void 0,lastMessageCtaType:void 0,lastMessageCtaTimestampMs:a[2]})}):c.i64.neq(a[2],void 0)?c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,0]):(b=a.item,d[0]=b.lastActivityTimestampMs)})},function(e){return c.i64.ge(a[2],d[0])?c.sequence([function(a){return c.storedProcedure(b("LSGetFirstAvailableAttachmentCTAID")).then(function(a){return a=a,d[2]=a[0],a})},function(b){return c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({lastMessageCtaId:d[2],lastMessageCtaType:a[1],lastMessageCtaTimestampMs:a[2]})})}]):c.resolve(0)}]):c.resolve()},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxWriteCTAIdToThreadsTableStoredProcedure";e.exports=a}),null);
__d("LsFalcoEventEntryPoint",[],(function(a,b,c,d,e,f){"use strict";a="message_actions";b="composer";c="icebreaker";f.messageActions=a;f.composer=b;f.icebreaker=c}),66);
__d("LsMessageActionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2051889");b=d("FalcoLoggerInternal").create("ls_message_action",a);e=b;g["default"]=e}),98);
__d("MAWEBFetch",["EBFormatUtils","FBLogger","I64","LSMEBTaskCreationSource","MAWAsyncEBPendingQueryPromise","MWEncryptedBackUpEBNotEnabledError","MWRestoreMessagesFromEB","WAResultOrError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.chatJid,e=a.count,f=a.db,g=a.direction,i=a.skipFullRestore;i=i===void 0?!1:i;var j=a.timestampMs;a=a.traceId;e=d("EBFormatUtils").adjustCount(e,g);var k=e[0];e=e[1];b=c("MWRestoreMessagesFromEB")({chatJid:b,newerNumMessages:(h||(h=d("I64"))).of_int32(e),numMessages:h.of_int32(k),passedTraceId:a,sortOrderMs:d("EBFormatUtils").adjustTs(j,g),source:c("LSMEBTaskCreationSource").MESSENGER_MESSAGE_LIST_PAGINATION,storage:f});if(b==null)return d("WAResultOrError").makeResult({hasMoreAfter:!1,hasMoreBefore:!1,messages:[],restoreType:"none"});e=i?d("MAWAsyncEBPendingQueryPromise").getPendingQueryPromiseFromTrace(b):d("MAWAsyncEBPendingQueryPromise").getWaitForRestorePromiseFromTrace(b);k=(yield e.then(function(a){return d("WAResultOrError").makeResult(a)})["catch"](function(a){if(a&&(a==null?void 0:a.message)===d("MWEncryptedBackUpEBNotEnabledError").EB_NOT_ENABLED)return d("WAResultOrError").makeError(d("MWEncryptedBackUpEBNotEnabledError").EB_NOT_ENABLED);c("FBLogger")("messenger_e2ee_web").catching(a).mustfix("[EBFetch] Failed to fetch");return d("WAResultOrError").makeError(null)}));if(k.success===!1)return k;a=k.value;j=a.hasMoreAfter;g=a.hasMoreBefore;f=a.messages;i=a.restoreType;return d("WAResultOrError").makeResult({hasMoreAfter:j,hasMoreBefore:g,messages:f,restoreType:i})});return i.apply(this,arguments)}g["default"]=a}),98);
__d("MWDidQueryPromptsNux",[],(function(a,b,c,d,e,f){"use strict";var g=!1;function a(){g=!0}function b(){return g}f.markDidQueryPromptsNux=a;f.getDidQueryPromptsNux=b}),66);
__d("defaultMWPThreadTheme",["I64","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;a=c("gkx")("24125")?{backgroundGradientColors:[],incomingGradientColors:[],outgoingGradientColors:[{color:(h||(h=d("I64"))).of_string("-5635841"),gradientIndex:(h||(h=d("I64"))).of_string("0"),themeFbid:(h||(h=d("I64"))).of_string("3259963564026002"),type_:(h||(h=d("I64"))).of_string("0")},{color:(h||(h=d("I64"))).of_string("-16744193"),gradientIndex:(h||(h=d("I64"))).of_string("1"),themeFbid:(h||(h=d("I64"))).of_string("3259963564026002"),type_:(h||(h=d("I64"))).of_string("0")}],threadTheme:{accessibilityLabel:"Default",appColorMode:(h||(h=d("I64"))).of_string("1"),fallbackColor:(h||(h=d("I64"))).of_string("-11645963"),fbid:(h||(h=d("I64"))).of_string("3259963564026002"),isDeprecated:!1,normalThemeId:(h||(h=d("I64"))).of_string("3259963564026002"),reverseGradiantsForRadial:!1,themeIdx:(h||(h=d("I64"))).of_string("275")}}:{backgroundGradientColors:[],incomingGradientColors:[],outgoingGradientColors:[],threadTheme:{accessibilityLabel:"Default Blue",appColorMode:(h||(h=d("I64"))).zero,fallbackColor:c("gkx")("23219")?(h||(h=d("I64"))).of_string("687359"):(h||(h=d("I64"))).of_string("-16743169"),fbid:(h||(h=d("I64"))).of_string("196241301102133"),isDeprecated:!1,normalThemeId:(h||(h=d("I64"))).zero,reverseGradiantsForRadial:!1,themeIdx:(h||(h=d("I64"))).of_string("94")}};g.defaultThemeWithColors=a}),98);
__d("MWPThreadThemeContext",["defaultMWPThreadTheme","emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("react")).createContext;b=babelHelpers["extends"]({},d("defaultMWPThreadTheme").defaultThemeWithColors,{previewId:void 0,setPreviewId:c("emptyFunction")});e=a(b);g.defaultContextValue=b;g.MWPThreadThemeContext=e}),98);
__d("MWXMAAttachmentSharedStackConstants",[],(function(a,b,c,d,e,f){"use strict";a=213;b=160;f.STACK_ITEM_HEIGHT=a;f.STACK_ITEM_WIDTH=b}),66);
__d("MWXTooltipGroup.react",["cr:824"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:824")}),98);
__d("randomShuffleSeeded",["Alea"],(function(a,b,c,d,e,f,g){function a(a){for(var b=arguments.length,d=new Array(b>1?b-1:0),e=1;e<b;e++)d[e-1]=arguments[e];var f=c("Alea").apply(void 0,d);function g(a){return Math.floor(f()*a)}for(var h=a.length-1;h>0;h--){var i=g(h+1);if(i!=h){var j=a[i];a[i]=a[h];a[h]=j}}return a}g["default"]=a}),98);
__d("useMWPThreadTheme",["MWPThreadThemeContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(){return i(d("MWPThreadThemeContext").MWPThreadThemeContext)}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("LSDeleteExistingMessageRanges",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(13).fetch([[[a[0]]]]),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxDeleteExistingMessageRangesStoredProcedure";e.exports=a}),null);
__d("LSInsertAttachmentCta",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(19).add({ctaId:a[0],attachmentFbid:a[1],attachmentIndex:a[2],threadKey:a[3],messageId:a[5],title:a[6],type_:a[7],platformToken:a[8],actionUrl:a[9],nativeUrl:a[10],urlWebviewType:a[11],actionContentBlob:a[12],enableExtensions:a[13],extensionHeightType:a[14],targetId:a[15]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxInsertAttachmentCtaStoredProcedure";e.exports=a}),null);
__d("LSInsertXmaAttachment",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.forEach(b.filter(b.db.table(16).fetch([[[a[25],a[30],a[32]]]]),function(c){return b.i64.eq(c.threadKey,a[25])&&b.i64.eq(b.i64.cast([0,0]),a[26])&&c.messageId===a[30]&&c.attachmentFbid===a[32]&&b.i64.lt(c.authorityLevel,a[127])&&(b.i64.eq(c.attachmentType,b.i64.cast([0,7]))||b.i64.eq(c.attachmentType,b.i64.cast([0,0])))&&c.hasMedia===!1&&c.hasXma===!0&&b.i64.eq(c.ephemeralMediaState,void 0)}),function(a){return a["delete"]()})},function(c){return b.db.table(16).add({threadKey:a[25],messageId:a[30],attachmentFbid:a[32],filename:a[1],filesize:a[2],hasMedia:!1,isSharable:a[3],playableUrl:a[4],playableUrlFallback:a[5],playableUrlExpirationTimestampMs:a[6],playableUrlMimeType:a[7],previewUrl:a[8],previewUrlFallback:a[9],previewUrlExpirationTimestampMs:a[10],previewUrlMimeType:a[11],previewWidth:a[13],previewHeight:a[14],attributionAppId:a[15],attributionAppName:a[16],attributionAppIcon:a[17],attributionAppIconFallback:a[18],attributionAppIconUrlExpirationTimestampMs:a[19],attachmentIndex:a[20],accessibilitySummaryText:a[21],shouldRespectServerPreviewSize:a[22],subtitleIconUrl:a[23],shouldAutoplayVideo:a[24],attachmentType:a[27],timestampMs:a[29],offlineAttachmentId:a[31],hasXma:!0,xmaLayoutType:a[33],xmasTemplateType:a[34],collapsibleId:a[35],defaultCtaId:a[36],defaultCtaTitle:a[37],defaultCtaType:a[38],attachmentCta1Id:a[40],cta1Title:a[41],cta1IconType:a[42],cta1Type:a[43],attachmentCta2Id:a[45],cta2Title:a[46],cta2IconType:a[47],cta2Type:a[48],attachmentCta3Id:a[50],cta3Title:a[51],cta3IconType:a[52],cta3Type:a[53],imageUrl:a[54],imageUrlFallback:a[55],imageUrlExpirationTimestampMs:a[56],actionUrl:a[57],titleText:a[58],subtitleText:a[59],subtitleDecorationType:a[60],maxTitleNumOfLines:a[61],maxSubtitleNumOfLines:a[62],descriptionText:a[63],sourceText:a[64],faviconUrl:a[65],faviconUrlFallback:a[66],faviconUrlExpirationTimestampMs:a[67],listItemsId:a[69],listItemsDescriptionText:a[70],listItemsDescriptionSubtitleText:a[71],listItemsSecondaryDescriptionText:a[72],listItemId1:a[73],listItemTitleText1:a[74],listItemContactUrlList1:a[75],listItemProgressBarFilledPercentage1:a[76],listItemContactUrlExpirationTimestampList1:a[77],listItemContactUrlFallbackList1:a[78],listItemAccessibilityText1:a[79],listItemTotalCount1:a[80],listItemId2:a[81],listItemTitleText2:a[82],listItemContactUrlList2:a[83],listItemProgressBarFilledPercentage2:a[84],listItemContactUrlExpirationTimestampList2:a[85],listItemContactUrlFallbackList2:a[86],listItemAccessibilityText2:a[87],listItemTotalCount2:a[88],listItemId3:a[89],listItemTitleText3:a[90],listItemContactUrlList3:a[91],listItemProgressBarFilledPercentage3:a[92],listItemContactUrlExpirationTimestampList3:a[93],listItemContactUrlFallbackList3:a[94],listItemAccessibilityText3:a[95],listItemTotalCount3:a[96],isBorderless:a[100],headerImageUrlMimeType:a[101],headerTitle:a[102],headerSubtitleText:a[103],headerImageUrl:a[104],headerImageUrlFallback:a[105],headerImageUrlExpirationTimestampMs:a[106],previewImageDecorationType:a[107],shouldHighlightHeaderTitleInTitle:a[108],targetId:a[109],attachmentLoggingType:a[112],previewUrlLarge:a[114],bodyText:a[115],gatingType:a[116],gatingTitle:a[117],targetExpiryTimestampMs:a[118],countdownTimestampMs:a[119],shouldBlurSubattachments:a[120],verifiedType:a[121],captionBodyText:a[122],isPublicXma:a[123],replyCount:a[124],xmaDataclass:a[125],previewOverlayCountdownExpiry:a[126],authorityLevel:a[127]})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxInsertXmaAttachmentStoredProcedure";e.exports=a}),null);
__d("LSSetForwardScore",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(12).fetch([[[a[0],a[2],a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.timestampMs,a[2])&&c.messageId===a[1]}),function(b){var c=b.update;b.item;return c({forwardScore:a[3]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxSetForwardScoreStoredProcedure";e.exports=a}),null);
__d("LSUpdateAttachmentCtaAtIndexIgnoringAuthority",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.i64.eq(a[6],b.i64.cast([0,0]))?b.forEach(b.db.table(16).fetch([[[a[0],a[1],a[2]]]]),function(b){var c=b.update;b.item;return c({defaultCtaId:a[3],defaultCtaTitle:a[4],defaultCtaType:a[5]})}):b.i64.eq(a[6],b.i64.cast([0,1]))?b.forEach(b.db.table(16).fetch([[[a[0],a[1],a[2]]]]),function(b){var c=b.update;b.item;return c({attachmentCta1Id:a[3],cta1Title:a[4],cta1Type:a[5],cta1IconType:void 0})}):b.i64.eq(a[6],b.i64.cast([0,2]))?b.forEach(b.db.table(16).fetch([[[a[0],a[1],a[2]]]]),function(b){var c=b.update;b.item;return c({attachmentCta2Id:a[3],cta2Title:a[4],cta2Type:a[5],cta2IconType:void 0})}):b.i64.eq(a[6],b.i64.cast([0,3]))?b.forEach(b.db.table(16).fetch([[[a[0],a[1],a[2]]]]),function(b){var c=b.update;b.item;return c({attachmentCta3Id:a[3],cta3Title:a[4],cta3Type:a[5],cta3IconType:void 0})}):b.resolve(function(a){b.logger(a).warn(a)}("Unexpected CTA index"))},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateAttachmentCtaAtIndexIgnoringAuthorityStoredProcedure";e.exports=a}),null);
__d("LSUpdateAttachmentItemCtaAtIndex",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.i64.eq(a[5],b.i64.cast([0,0]))?b.forEach(b.db.table(18).fetch([[[a[0],a[1]]]]),function(b){var c=b.update;b.item;return c({defaultCtaId:a[2],defaultCtaTitle:a[3],defaultCtaType:a[4]})}):b.i64.eq(a[5],b.i64.cast([0,1]))?b.forEach(b.db.table(18).fetch([[[a[0],a[1]]]]),function(b){var c=b.update;b.item;return c({attachmentCta1Id:a[2],cta1Title:a[3],cta1Type:a[4],cta1IconType:void 0})}):b.i64.eq(a[5],b.i64.cast([0,2]))?b.forEach(b.db.table(18).fetch([[[a[0],a[1]]]]),function(b){var c=b.update;b.item;return c({attachmentCta2Id:a[2],cta2Title:a[3],cta2Type:a[4],cta2IconType:void 0})}):b.i64.eq(a[5],b.i64.cast([0,3]))?b.forEach(b.db.table(18).fetch([[[a[0],a[1]]]]),function(b){var c=b.update;b.item;return c({attachmentCta3Id:a[2],cta3Title:a[3],cta3Type:a[4],cta3IconType:void 0})}):b.resolve(function(a){b.logger(a).warn(a)}("Unexpected CTA index"))},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateAttachmentItemCtaAtIndexStoredProcedure";e.exports=a}),null);
__d("LSUpdateReadReceipt",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(14).fetch([[[a[1],a[2]]]]),function(c){return b.i64.eq(c.threadKey,a[1])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.contactId,a[2])&&b.i64.lt(c.readWatermarkTimestampMs,a[0])}),function(c){var d=c.update;c=c.item;return d({readWatermarkTimestampMs:a[0],readActionTimestampMs:b.i64.gt(a[3],b.i64.cast([0,0]))?a[3]:c.readActionTimestampMs})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateReadReceiptStoredProcedure";e.exports=a}),null);
__d("LSUpsertMessage",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(12).fetch([[[a[9]]],"optimistic"]).next().then(function(c,d){var e=c.done;c=c.value;return e?b.db.table(12).add({threadKey:a[3],timestampMs:a[5],messageId:a[8],offlineThreadingId:a[9],authorityLevel:a[2],primarySortKey:a[6],senderId:a[10],isAdminMessage:a[12],sendStatus:a[15],sendStatusV2:a[16],text:a[0],subscriptErrorMessage:a[1],secondarySortKey:a[7],stickerId:a[11],messageRenderingType:a[13],isUnsent:a[17],unsentTimestampMs:a[18],mentionOffsets:a[19],mentionLengths:a[20],mentionIds:a[21],mentionTypes:a[22],replySourceId:a[23],replySourceType:a[24],replySourceTypeV2:a[25],replyStatus:a[26],replySnippet:a[27],replyMessageText:a[28],replyToUserId:a[29],replyMediaExpirationTimestampMs:a[30],replyMediaUrl:a[31],replyMediaPreviewWidth:a[33],replyMediaPreviewHeight:a[34],replyMediaUrlMimeType:a[35],replyMediaUrlFallback:a[36],replyCtaId:a[37],replyCtaTitle:a[38],replyAttachmentType:a[39],replyAttachmentId:a[40],replyAttachmentExtra:a[41],replyType:a[42],isForwarded:a[43],forwardScore:a[44],hasQuickReplies:a[45],adminMsgCtaId:a[46],adminMsgCtaTitle:a[47],adminMsgCtaType:a[48],cannotUnsendReason:a[49],textHasLinks:a[50],viewFlags:a[51],displayedContentTypes:a[52],viewedPluginKey:a[53],viewedPluginContext:a[54],quickReplyType:a[55],hotEmojiSize:a[56],platformXmdEncoded:a[57],replySourceTimestampMs:a[58],ephemeralDurationInSec:a[59],msUntilExpirationTs:a[60],ephemeralExpirationTs:a[61],takedownState:a[62],isCollapsed:a[63],subthreadKey:a[64],botResponseId:a[65],metadataDataclass:a[66],editCount:a[67],isPaidPartnership:a[68],adminSignatureName:a[69],adminSignatureProfileUrl:a[70],adminSignatureCreatorType:a[71],scheduledTimestamp:a[72]}):(d=c.item,b.i64.le(d.authorityLevel,a[2])?b.db.table(12).put({threadKey:a[3],timestampMs:a[5],messageId:a[8],offlineThreadingId:a[9],authorityLevel:a[2],primarySortKey:d.primarySortKey,senderId:a[10],isAdminMessage:a[12],sendStatus:a[15],sendStatusV2:a[16],text:a[0],subscriptErrorMessage:a[1],secondarySortKey:d.secondarySortKey,stickerId:a[11],messageRenderingType:a[13],isUnsent:a[17],unsentTimestampMs:a[18],mentionOffsets:a[19],mentionLengths:a[20],mentionIds:a[21],mentionTypes:a[22],replySourceId:a[23],replySourceType:a[24],replySourceTypeV2:a[25],replyStatus:a[26],replySnippet:a[27],replyMessageText:a[28],replyToUserId:a[29],replyMediaExpirationTimestampMs:a[30],replyMediaUrl:a[31],replyMediaPreviewWidth:a[33],replyMediaPreviewHeight:a[34],replyMediaUrlMimeType:a[35],replyMediaUrlFallback:a[36],replyCtaId:a[37],replyCtaTitle:a[38],replyAttachmentType:a[39],replyAttachmentId:a[40],replyAttachmentExtra:a[41],replyType:a[42],isForwarded:a[43],forwardScore:a[44],hasQuickReplies:a[45],adminMsgCtaId:a[46],adminMsgCtaTitle:a[47],adminMsgCtaType:a[48],cannotUnsendReason:a[49],textHasLinks:a[50],viewFlags:a[51],displayedContentTypes:a[52],viewedPluginKey:a[53],viewedPluginContext:a[54],quickReplyType:a[55],hotEmojiSize:a[56],platformXmdEncoded:a[57],replySourceTimestampMs:a[58],ephemeralDurationInSec:a[59],msUntilExpirationTs:a[60],ephemeralExpirationTs:a[61],takedownState:a[62],isCollapsed:a[63],subthreadKey:a[64],botResponseId:a[65],metadataDataclass:a[66],editCount:a[67],isPaidPartnership:a[68],adminSignatureName:a[69],adminSignatureProfileUrl:a[70],adminSignatureCreatorType:a[71],scheduledTimestamp:a[72]}):b.resolve())})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpsertMessageStoredProcedure";e.exports=a}),null);/*FB_PKG_DELIM*/
__d("LSAddParticipantIdToGroupThread",["LSComputeParticipantCapabilities"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return c.storedProcedure(b("LSComputeParticipantCapabilities"),a[1],a[0]).then(function(a){return a=a,d[0]=a[0],a})},function(b){return c.filter(c.db.table(14).fetch([[[a[0],a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,a[1])&&c.i64.gt(b.authorityLevel,a[9])}).next().then(function(b){var e=b.done;b.value;return e?c.db.table(14).put({threadKey:a[0],contactId:a[1],readWatermarkTimestampMs:a[2],readActionTimestampMs:a[3],deliveredWatermarkTimestampMs:a[4],nickname:a[5],normalizedSearchTerms:a[10],isAdmin:a[6],isSuperAdmin:a[13],subscribeSource:a[7],authorityLevel:a[9],participantCapabilities:d[0],groupParticipantJoinState:a[11],isModerator:a[12],threadRoles:a[14]}):0})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxAddParticipantIdToGroupThreadStoredProcedure";e.exports=a}),null);
__d("LSClearPinnedMessages",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(205).fetch([[[a[0]]]]),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxClearPinnedMessagesStoredProcedure";e.exports=a}),null);
__d("LSIssueCheckBackupStateOnInitSyncTask",["LSArrayGetObjectAt","LSIsEncryptionVersionSecure","LSIssueNewEbTaskAndGetTaskIDV2"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,e){var f=a.done;a=a.value;return f?(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsIssueCheckBackupStateOnInitSyncTaskStoredProcedure] No client state in checkBackupStateOnInitSyncTask with reason: 1"),d[0]=!1):(e=a.item,c.sequence([function(a){return d[9]=e.deviceId,d[8]=e.backupTenancy,d[7]=e.encryptionVersion,d[2]=void 0,c.i64.neq(d[2],void 0)?c.resolve(d[3]=d[2]):c.sequence([function(a){return d[10]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[11]=a[0],a})},function(a){return d[11]?d[20]=(d[10].push(c.i64.cast([0,0])),d[10]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[12]=a[0],a})},function(a){return d[12]?d[20]=(d[10].push(c.i64.cast([0,2])),d[10]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[13]=a[0],a})},function(a){return d[13]?d[20]=(d[10].push(c.i64.cast([0,3])),d[10]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[14]=a[0],a})},function(a){return d[14]?d[20]=(d[10].push(c.i64.cast([0,4])),d[10]):0,d[15]=c.createArray(),d[16]=c.i64.of_int32(d[10].length),c.i64.gt(d[16],c.i64.cast([0,0]))?c.loopAsync(d[16],function(a){return d[20]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[10],d[20]).then(function(a){return a=a,d[21]=a[0],d[22]=a[1],a})},function(a){return d[23]=(d[15].push(d[21]),d[15])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[20]=c.createArray(),d[21]=c.i64.of_int32(d[15].length),c.i64.gt(d[21],c.i64.cast([0,0]))?c.loopAsync(d[21],function(a){return d[23]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[15],d[23]).then(function(a){return a=a,d[24]=a[0],d[25]=a[1],a})},function(a){return d[26]=(d[20].push(c.i64.to_string(d[24])),d[20])}])}):c.resolve()},function(a){return d[22]=d[20].join(","),d[17]=d[22]}])},function(a){return d[15].some(function(a){return c.i64.eq(d[7],a)})?d[18]=d[7]:d[18]=void 0,c.i64.neq(d[18],void 0)?d[19]=d[18]:d[19]=void 0,d[3]=d[19]}])},function(a){return c.i64.neq(d[3],void 0)?d[4]=d[3]:d[4]=c.i64.cast([0,0]),c.i64.neq(d[8],void 0)?d[5]=d[8]:d[5]=c.i64.cast([0,1]),c.i64.neq(d[9],void 0)?c.sequence([function(a){return d[10]=new c.Map(),d[10].set("backup_id",e.backupId),d[10].set("device_id",d[9]),d[11]=c.toJSON(d[10]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),"encrypted_backups_setup",c.i64.cast([0,50054]),d[11],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[12]=a[0],a})},function(a){return d[6]=!0}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsIssueCheckBackupStateOnInitSyncTaskStoredProcedure] No client state in checkBackupStateOnInitSyncTask with reason: 24"),d[6]=!1))},function(a){return d[0]=d[6]}]))})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsIssueCheckBackupStateOnInitSyncTaskStoredProcedure";e.exports=a}),null);
__d("LSIssueThreadCapabilitySyncTask",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.resolve(c)}a.__sproc_name__="LSMailboxIssueThreadCapabilitySyncTaskStoredProcedure";e.exports=a}),null);
__d("LSSetHMPSStatus",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.resolve(c)}a.__sproc_name__="LSMailboxSetHMPSStatusStoredProcedure";e.exports=a}),null);
__d("LSTruncateMetadataThreads.nop",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;a=function(a,c){return(g||(g=b("Promise"))).resolve()};f["default"]=a}),66);
__d("LSTruncateMetadataThreads",["LSTruncateMetadataThreads.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(a){return c.nativeOperation(b("LSTruncateMetadataThreads.nop"))},function(a){return c.resolve(d)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxTruncateMetadataThreadsStoredProcedure";e.exports=a}),null);
__d("LSTruncateThreadRangeTablesForSyncGroup",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.i64.eq(a[0],b.i64.cast([0,1]))?b.forEach(b.filter(b.db.table(10).fetch(),function(a){return b.i64.eq(b.i64.cast([0,1])==null?b.i64.cast([0,1]):b.i64.cast([0,1]),b.i64.cast([0,1]))}),function(a){return a["delete"]()}):b.i64.eq(a[0],b.i64.cast([0,95]))?b.forEach(b.filter(b.db.table(10).fetch([[[b.i64.cast([0,0])],[b.i64.cast([-1,4294967295])]]]),function(a){return b.i64.eq(b.i64.cast([0,1])==null?b.i64.cast([0,1]):b.i64.cast([0,1]),b.i64.cast([0,1]))&&(b.i64.eq(a.parentThreadKey,b.i64.cast([0,0]))||b.i64.eq(a.parentThreadKey,b.i64.cast([-1,4294967295])))}),function(a){return a["delete"]()}):b.resolve(0)},function(c){return b.i64.eq(a[0],b.i64.cast([0,1]))?b.forEach(b.filter(b.db.table(247).fetch(),function(a){return b.i64.eq(a.syncGroup==null?b.i64.cast([0,1]):a.syncGroup,b.i64.cast([0,1]))}),function(a){return a["delete"]()}):b.resolve()},function(c){return b.forEach(b.db.table(198).fetch([[[a[0]]]]),function(a){return a["delete"]()})},function(c){return b.forEach(b.db.table(220).fetch([[[a[0]]]]),function(a){return a["delete"]()})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxTruncateThreadRangeTablesForSyncGroupStoredProcedure";e.exports=a}),null);
__d("LSTruncateTablesForSyncGroup",["LSTruncateThreadRangeTablesForSyncGroup"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(d){return c.sequence([function(b){return c.forEach(c.filter(c.db.table(9).fetch(),function(b){return(c.i64.eq(b.syncGroup,a[0])||c.i64.eq(b.syncGroup,void 0)&&c.i64.eq(c.i64.cast([0,1]),a[0]))&&![c.i64.cast([0,17]),c.i64.cast([0,18]),c.i64.cast([0,19]),c.i64.cast([0,20]),c.i64.cast([0,21]),c.i64.cast([0,22]),c.i64.cast([0,23]),c.i64.cast([0,24]),c.i64.cast([0,25]),c.i64.cast([0,26])].some(function(a){return c.i64.eq(b.threadType,a)})}),function(a){return a["delete"]()})},function(d){return c.storedProcedure(b("LSTruncateThreadRangeTablesForSyncGroup"),a[0])}])},function(a){return c.resolve(d)}])}a.__sproc_name__="LSMailboxTruncateTablesForSyncGroupStoredProcedure";e.exports=a}),null);
__d("LSUpdateThreadsRangesV2",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(c){return b.forEach(b.db.table(10).fetch([[[a[1]]]]),function(a){return a["delete"]()})},function(d){return c[8]=b.i64.gt(a[2],b.i64.cast([0,1]))&&b.i64.gt(a[3],b.i64.cast([-2147483648,0])),a[0]==="inbox"&&b.i64.eq(a[1],b.i64.cast([0,0]))&&b.i64.eq(a[4],b.i64.cast([0,1]))?b.sequence([function(d){return c[9]=a[2],c[10]=a[3],c[11]=!1,c[12]=c[8],b.forEach(b.db.table(198).fetch(),function(a){a=a.item;return c[13]=a.minLastActivityTimestampMs,c[15]=a.minThreadKey,c[14]=b.i64.lt(c[9]==null?c[13]:c[9],c[13]),c[9]=c[14]?c[13]:c[9],c[10]=c[14]?c[15]:c[10],c[11]=c[11]||a.isLoadingBefore,c[12]=c[12]||b.i64.gt(c[13],b.i64.cast([0,1]))&&b.i64.gt(c[15],b.i64.cast([-2147483648,0]))})},function(a){return a=[c[9],c[10],c[11],c[12]],c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],a}]):b.resolve((d=[a[2],a[3],!1,c[8]],c[0]=d[0],c[1]=d[1],c[2]=d[2],c[3]=d[3],d))},function(d){return b.i64.eq(a[4],b.i64.cast([0,1]))?b.sequence([function(d){return c[9]=c[0],c[10]=c[1],c[11]=c[2],c[12]=c[3],b.forEach(b.filter(b.db.table(220).fetch(),function(c){return b.i64.eq(c.parentThreadKey,a[1])}),function(a){a=a.item;return c[13]=a.minLastActivityTimestampMs,c[15]=a.minThreadKey,c[14]=b.i64.lt(c[9]==null?c[13]:c[9],c[13]),c[9]=c[14]?c[13]:c[9],c[10]=c[14]?c[15]:c[10],c[11]=c[11]||a.isLoadingBefore,c[12]=c[12]||b.i64.gt(c[13],b.i64.cast([0,1]))&&b.i64.gt(c[15],b.i64.cast([-2147483648,0]))})},function(a){return a=[c[9],c[10],c[11],c[12]],c[4]=a[0],c[5]=a[1],c[6]=a[2],c[7]=a[3],a}]):b.resolve((d=[c[0],c[1],c[2],c[3]],c[4]=d[0],c[5]=d[1],c[6]=d[2],c[7]=d[3],d))},function(d){return b.db.table(10).add({parentThreadKey:a[1],minThreadKey:c[5]==null?b.i64.cast([-2147483648,0]):c[5],minLastActivityTimestampMs:c[4]==null?b.i64.cast([0,1]):c[4],maxLastActivityTimestampMs:b.i64.cast([0,1]),maxThreadKey:b.i64.cast([-2147483648,0]),isLoadingBefore:c[6],isLoadingAfter:!1,hasMoreBefore:c[7],hasMoreAfter:!1})}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxUpdateThreadsRangesV2StoredProcedure";e.exports=a}),null);
__d("LSUpsertFolderSeenTimestamp",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.i64.gt(a[1],b.i64.cast([0,0]))?b.db.table(35).fetch([[[a[0]]]]).next().then(function(c,d){var e=c.done;c=c.value;return e?b.db.table(35).add({parentThreadKey:a[0],lastSeenRequestTimestampMs:a[1]}):(d=c.item,b.i64.lt(d.lastSeenRequestTimestampMs,a[1])?b.forEach(b.db.table(35).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({lastSeenRequestTimestampMs:a[1]})}):b.resolve())}):b.resolve()},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpsertFolderSeenTimestampStoredProcedure";e.exports=a}),null);
__d("LSWriteThreadCapabilities",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return c[0]=b.i64.of_float(Date.now()),b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({capabilities:a[1],capabilities2:a[2],capabilities3:a[3],capabilities4:a[4]})})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxWriteThreadCapabilitiesStoredProcedure";e.exports=a}),null);/*FB_PKG_DELIM*/
__d("getChatJidForLSDBJid",["I64","LSMessagingThreadTypeUtil","ReQL","WAJids","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(b)));if(a!=null){b=(h||(h=d("I64"))).to_string(c);return d("LSMessagingThreadTypeUtil").isGroup(a.threadType)?d("WAJids").toGroupJid(b):d("WAJids").toMsgrUserJid(b)}});return i.apply(this,arguments)}g.getMaybeChatJidForLSDBJid=a}),98);
__d("LSShimCompleteThreadCutover.nop",["I64","MAWBridgeFireAndForget","ReQL","asyncToGeneratorRuntime","getChatJidForLSDBJid"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.cutover_threads).getKeyRange(e)));if(b!=null){c=b.showOpenMessageHistory===!1;if(c)return[(h||(h=d("I64"))).one];c=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table.index("jid")).getKeyRange(b.armadilloThreadId)));if(c!=null){b=(yield d("getChatJidForLSDBJid").getMaybeChatJidForLSDBJid(a,c.serverThreadKey,c.jid));if(b==null)return[(h||(h=d("I64"))).one];d("MAWBridgeFireAndForget").fireAndForget("backend","insertAdminMessageInCutoverThreads",{openThreadId:(h||(h=d("I64"))).to_string(e),threadJid:b,traceId:f});return[h.zero]}return[(h||(h=d("I64"))).one]}return[(h||(h=d("I64"))).one]});function c(b,c,d,e,f){return a.apply(this,arguments)}return c}();g["default"]=a}),98);
__d("LSCompleteThreadCutover",["LSShimCompleteThreadCutover.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.nativeOperation(b("LSShimCompleteThreadCutover.nop"),a[0],a[1],a[2]).then(function(a){return a=a,d[0]=a[0],a})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxCompleteThreadCutoverStoredProcedure";e.exports=a}),null);
__d("LSDeleteThenInsertBotProfileInfoV2",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(299).put({botId:a[0],isCreatedByViewer:a[1],description:a[4],tintColor:a[2],shortDescription:a[3]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSContactDeleteThenInsertBotProfileInfoV2StoredProcedure";e.exports=a}),null);
__d("LSDeleteThenInsertProactiveWarningSettings",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(9).fetch([[[a[0]]]]).next().then(function(c,d){d=c.done;c=c.value;return d?0:(c.item,b.db.table(183).put({threadKey:a[0],nextCheckTimestampMs:a[2],token:a[3],tag:a[4],storyLocation:a[5],entryPoint:a[6],context:a[7],suspectId:a[1]}))})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSProactiveWarningsDeleteThenInsertProactiveWarningSettingsStoredProcedure";e.exports=a}),null);
__d("LSIssueParticipantPointQuery",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("table","14"),d[0].set("type",c.i64.cast([0,1])),d[0].set("1",a[0]),d[0].set("2",a[1]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"ppq",c.i64.cast([0,17]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,1]),void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxIssueParticipantPointQueryStoredProcedure";e.exports=a}),null);
__d("LSSetMessageTextHasLinks",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(12).fetch([[[a[0],a[2],a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.timestampMs,a[2])&&c.messageId===a[1]}),function(a){var b=a.update;a.item;return b({textHasLinks:!0})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxSetMessageTextHasLinksStoredProcedure";e.exports=a}),null);
__d("LSStoreProjectConfiguration",["LSBase64Decode.nop","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return c.nativeOperation(b("LSBase64Decode.nop"),a[4]).then(function(a){return a=a,d[0]=a[0],a})},function(e){return c.blobs.neq(d[0],void 0)?c.db.table(307).put({configId:a[1],projectName:a[0],cipherSuite:a[5],publicKey:d[0],maxEvals:a[2],redemptionLimit:a[3],expirationTimestampMs:a[6],tokenPollFrequencyMs:a[7],maxClientTokenPoolSize:a[8]}):(function(a){c.logger(a).info(a)}("issuing retry for project configurations task since public key was null"),d[1]=new c.Map(),d[1].set("project_name",a[0]),d[2]=d[1].get("project_name"),d[1],d[3]=c.toJSON(d[1]),c.storedProcedure(b("LSIssueNewTask"),["acs_credentials","_",d[2]].join(""),c.i64.cast([0,351]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0])))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSAnonymousCredentialsStoreProjectConfigurationStoredProcedure";e.exports=a}),null);
__d("LSUpdateCommunityThreadStaleState",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.filter(b.db.table(9).fetch([[[a[0]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&([b.i64.cast([0,23]),b.i64.cast([0,21]),b.i64.cast([0,18]),b.i64.cast([0,26])].some(function(a){return b.i64.eq(c.threadType,a)})||b.i64.eq(c.threadType,b.i64.cast([0,152])))}).next().then(function(c,d){d=c.done;c=c.value;return d?0:(c.item,b.db.table(294).fetch([[[a[0]]]]).next().then(function(c,d){d=c.done;c=c.value;return d?b.db.table(294).add({threadKey:a[0],threadQueueSequenceId:b.i64.cast([0,0]),isStale:a[1]}):(c.item,b.forEach(b.db.table(294).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({isStale:a[1]})}))}))})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateCommunityThreadStaleStateStoredProcedure";e.exports=a}),null);
__d("LSUpdateOrInsertCommunitySurfaceRange",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(253).put({surfaceType:a[0],communityKey:a[1],isLoadingAfter:!1,hasMoreAfter:a[2],nextPageCursor:a[4]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateOrInsertCommunitySurfaceRangeStoredProcedure";e.exports=a}),null);
__d("LSVerifyContactParticipantExist",["LSIssueNewTask","LSIssueParticipantPointQuery"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return c.db.table(7).fetch([[[a[0]]]]).next().then(function(e,f){f=e.done;e=e.value;return f?c.sequence([function(e){return d[2]=new c.Map(),d[2].set("contact_id",a[0]),d[3]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),"cpq_v2",c.i64.cast([0,207]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(b){return c.forEach(c.filter(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))&&c.i64.lt(b.authorityLevel,c.i64.cast([0,60]))}),function(a){return a["delete"]()})},function(b){return c.db.table(7).add({id:a[0],rank:0,profilePictureUrl:"",name:a[2],isMessengerUser:!1,isMemorialized:!1,contactType:c.i64.cast([0,1]),contactTypeExact:c.i64.cast([0,1]),blockedByViewerStatus:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,60]),workForeignEntityType:c.i64.cast([0,0]),contactViewerRelationship:c.i64.cast([0,0])})}]):(e.item,0)})},function(d){return c.filter(c.db.table(14).fetch([[[a[1],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,a[0])}).next().then(function(d,e){e=d.done;d=d.value;return e?c.storedProcedure(b("LSIssueParticipantPointQuery"),a[1],a[0]):(d.item,0)})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxVerifyContactParticipantExistStoredProcedure";e.exports=a}),null);/*FB_PKG_DELIM*/
__d("LSDeleteThenInsertMessage",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(12).fetch([[[a[9]]],"optimistic"]).next().then(function(c,d){var e=c.done;c=c.value;return e?b.db.table(12).add({threadKey:a[3],timestampMs:a[5],messageId:a[8],offlineThreadingId:a[9],authorityLevel:a[2],primarySortKey:a[6],senderId:a[10],isAdminMessage:a[12],sendStatus:a[15],sendStatusV2:a[16],text:a[0],subscriptErrorMessage:a[1],secondarySortKey:a[7],stickerId:a[11],messageRenderingType:a[13],isUnsent:a[17],unsentTimestampMs:a[18],mentionOffsets:a[19],mentionLengths:a[20],mentionIds:a[21],mentionTypes:a[22],replySourceId:a[23],replySourceType:a[24],replySourceTypeV2:a[25],replyStatus:a[26],replySnippet:a[27],replyMessageText:a[28],replyToUserId:a[29],replyMediaExpirationTimestampMs:a[30],replyMediaUrl:a[31],replyMediaPreviewWidth:a[33],replyMediaPreviewHeight:a[34],replyMediaUrlMimeType:a[35],replyMediaUrlFallback:a[36],replyCtaId:a[37],replyCtaTitle:a[38],replyAttachmentType:a[39],replyAttachmentId:a[40],replyAttachmentExtra:a[41],isForwarded:a[42],forwardScore:a[43],hasQuickReplies:a[44],adminMsgCtaId:a[45],adminMsgCtaTitle:a[46],adminMsgCtaType:a[47],cannotUnsendReason:a[48],textHasLinks:a[49],viewFlags:a[50],displayedContentTypes:a[51],viewedPluginKey:a[52],viewedPluginContext:a[53],quickReplyType:a[54],hotEmojiSize:a[55],platformXmdEncoded:a[56],replySourceTimestampMs:a[57],ephemeralDurationInSec:a[58],msUntilExpirationTs:a[59],ephemeralExpirationTs:a[60],takedownState:a[61],isCollapsed:a[62],subthreadKey:a[63],botResponseId:a[64],metadataDataclass:a[65],editCount:a[66],isPaidPartnership:a[67],adminSignatureName:a[68],adminSignatureProfileUrl:a[69],adminSignatureCreatorType:a[70],scheduledTimestamp:a[71]}):(d=c.item,b.i64.le(d.authorityLevel,a[2])?b.db.table(12).put({threadKey:a[3],timestampMs:a[5],messageId:a[8],offlineThreadingId:a[9],authorityLevel:a[2],primarySortKey:d.primarySortKey,senderId:a[10],isAdminMessage:a[12],sendStatus:a[15],sendStatusV2:a[16],text:a[0],subscriptErrorMessage:a[1],secondarySortKey:d.secondarySortKey,stickerId:a[11],messageRenderingType:a[13],isUnsent:a[17],unsentTimestampMs:a[18],mentionOffsets:a[19],mentionLengths:a[20],mentionIds:a[21],mentionTypes:a[22],replySourceId:a[23],replySourceType:a[24],replySourceTypeV2:a[25],replyStatus:a[26],replySnippet:a[27],replyMessageText:a[28],replyToUserId:a[29],replyMediaExpirationTimestampMs:a[30],replyMediaUrl:a[31],replyMediaPreviewWidth:a[33],replyMediaPreviewHeight:a[34],replyMediaUrlMimeType:a[35],replyMediaUrlFallback:a[36],replyCtaId:a[37],replyCtaTitle:a[38],replyAttachmentType:a[39],replyAttachmentId:a[40],replyAttachmentExtra:a[41],isForwarded:a[42],forwardScore:a[43],hasQuickReplies:a[44],adminMsgCtaId:a[45],adminMsgCtaTitle:a[46],adminMsgCtaType:a[47],cannotUnsendReason:a[48],textHasLinks:a[49],viewFlags:a[50],displayedContentTypes:a[51],viewedPluginKey:a[52],viewedPluginContext:a[53],quickReplyType:a[54],hotEmojiSize:a[55],platformXmdEncoded:a[56],replySourceTimestampMs:a[57],ephemeralDurationInSec:a[58],msUntilExpirationTs:a[59],ephemeralExpirationTs:a[60],takedownState:a[61],isCollapsed:a[62],subthreadKey:a[63],botResponseId:a[64],metadataDataclass:a[65],editCount:a[66],isPaidPartnership:a[67],adminSignatureName:a[68],adminSignatureProfileUrl:a[69],adminSignatureCreatorType:a[70],scheduledTimestamp:a[71]}):b.resolve())})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxDeleteThenInsertMessageStoredProcedure";e.exports=a}),null);
__d("ProfileCometGroupAdminInsightsParticipationChartLineCommentsQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7121070211290005"}),null);/*FB_PKG_DELIM*/
__d("LSInsertBlobAttachment",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.forEach(b.filter(b.db.table(16).fetch([[[a[27],a[32],a[34]]]]),function(c){return b.i64.eq(c.threadKey,a[27])&&b.i64.eq(b.i64.cast([0,0]),a[28])&&c.messageId===a[32]&&c.attachmentFbid===a[34]&&b.i64.lt(c.authorityLevel,a[48])&&(b.i64.eq(c.attachmentType,b.i64.cast([0,2]))||b.i64.eq(c.attachmentType,b.i64.cast([0,3]))||b.i64.eq(c.attachmentType,b.i64.cast([0,4]))||b.i64.eq(c.attachmentType,b.i64.cast([0,5]))||b.i64.eq(c.attachmentType,b.i64.cast([0,6]))||b.i64.eq(c.attachmentType,b.i64.cast([0,10]))||b.i64.eq(c.attachmentType,b.i64.cast([0,14]))||b.i64.eq(c.attachmentType,b.i64.cast([0,15])))&&b.i64.eq(c.ephemeralMediaState,void 0)&&c.isSharable===!1}),function(a){return a["delete"]()})},function(c){return b.db.table(16).add({threadKey:a[27],messageId:a[32],attachmentFbid:a[34],filename:a[0],filesize:a[1],hasMedia:a[2],isSharable:!1,playableUrl:a[3],playableUrlFallback:a[4],playableUrlExpirationTimestampMs:a[5],playableUrlMimeType:a[6],dashManifest:a[7],previewUrl:a[8],previewUrlFallback:a[9],previewUrlExpirationTimestampMs:a[10],previewUrlMimeType:a[11],miniPreview:a[13],previewWidth:a[14],previewHeight:a[15],attributionAppId:a[16],attributionAppName:a[17],attributionAppIcon:a[18],attributionAppIconFallback:a[19],attributionAppIconUrlExpirationTimestampMs:a[20],localPlayableUrl:a[21],playableDurationMs:a[22],attachmentIndex:a[23],accessibilitySummaryText:a[24],isPreviewImage:a[25],originalFileHash:a[26],attachmentType:a[29],timestampMs:a[31],offlineAttachmentId:a[33],hasXma:a[35],xmaLayoutType:a[36],xmasTemplateType:a[37],titleText:a[38],subtitleText:a[39],descriptionText:a[40],sourceText:a[41],faviconUrlExpirationTimestampMs:a[42],isBorderless:a[44],previewUrlLarge:a[45],samplingFrequencyHz:a[46],waveformData:a[47],authorityLevel:a[48]})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxInsertBlobAttachmentStoredProcedure";e.exports=a}),null);
__d("LSInsertStickerAttachment",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.forEach(b.filter(b.db.table(16).fetch([[[a[14],a[18],a[19]]]]),function(c){return b.i64.eq(c.threadKey,a[14])&&b.i64.eq(b.i64.cast([0,0]),a[15])&&c.messageId===a[18]&&c.attachmentFbid===a[19]&&b.i64.lt(c.authorityLevel,a[31])&&b.i64.eq(c.attachmentType,b.i64.cast([0,1]))&&c.hasMedia===!0&&c.hasXma===!1&&b.i64.eq(c.ephemeralMediaState,void 0)&&c.isSharable===!1}),function(a){return a["delete"]()})},function(c){return b.db.table(16).add({threadKey:a[14],messageId:a[18],attachmentFbid:a[19],hasMedia:!0,isSharable:!1,playableUrl:a[0],playableUrlFallback:a[1],playableUrlExpirationTimestampMs:a[2],playableUrlMimeType:a[3],previewUrl:a[4],previewUrlFallback:a[5],previewUrlExpirationTimestampMs:a[6],previewUrlMimeType:a[7],previewWidth:a[9],previewHeight:a[10],imageUrlMimeType:a[11],attachmentIndex:a[12],accessibilitySummaryText:a[13],attachmentType:b.i64.cast([0,1]),timestampMs:a[17],hasXma:!1,imageUrl:a[20],imageUrlFallback:a[21],imageUrlExpirationTimestampMs:a[22],faviconUrlExpirationTimestampMs:a[23],avatarViewSize:a[25],avatarCount:a[26],targetId:a[27],mustacheText:a[30],authorityLevel:a[31]})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxInsertStickerAttachmentStoredProcedure";e.exports=a}),null);/*FB_PKG_DELIM*/
__d("LSClearThreadBannedUsers",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.i64.neq(void 0,void 0)?b.forEach(b.db.table(297).fetch([[[a[0],void 0]]]),function(a){return a["delete"]()}):b.forEach(b.db.table(297).fetch([[[a[0]]]]),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxClearThreadBannedUsersStoredProcedure";e.exports=a}),null);
__d("LSUpdateExtraAttachmentColumns",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(16).fetch([[[a[0],a[2],a[3]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),a[1])&&c.messageId===a[2]&&c.attachmentFbid===a[3]}),function(b){var c=b.update;b.item;return c({listItemAccessibilityText1:a[4],listItemAccessibilityText2:a[5],listItemAccessibilityText3:a[6],subtitleIconUrl:a[17],attachmentLoggingType:a[18],preheaderText:a[19],shouldAutoplayVideo:a[20],previewUrlLarge:a[21],previewWidthLarge:a[24],previewHeightLarge:a[25],avatarViewUrlList:a[10],avatarViewUrlExpirationTimestampList:a[11],avatarViewUrlFallbackList:a[12],avatarViewTitleList:a[13],avatarViewSize:a[14],avatarCount:a[15],avatarViewContextText:a[16]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateExtraAttachmentColumnsStoredProcedure";e.exports=a}),null);
__d("LSUpdateSelectiveSyncStateV2",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.db.table(294).fetch([[[a[0]]]]).next().then(function(d,e){e=d.done;d=d.value;return e?(b.i64.neq(a[1],void 0)?c[1]=a[1]:c[1]=b.i64.cast([0,0]),b.db.table(294).add({threadKey:a[0],threadQueueSequenceId:c[1],lastSelectiveSyncTimestampMs:a[2]})):(d.item,b.sequence([function(c){return b.i64.neq(a[2],void 0)?b.forEach(b.db.table(294).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({lastSelectiveSyncTimestampMs:a[2]})}):b.resolve()},function(c){return b.i64.neq(a[1],void 0)?b.forEach(b.db.table(294).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({threadQueueSequenceId:a[1]})}):b.resolve()}]))})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxUpdateSelectiveSyncStateV2StoredProcedure";e.exports=a}),null);
__d("LSUpsertTpqTtrc",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return c[0]=b.i64.of_float(Date.now()),b.db.table(286).put({threadKey:a[0],dasmExecutionTimestampMs:c[0],deltaInsertionTimestampMs:a[1],status:a[2]})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxUpsertTpqTtrcStoredProcedure";e.exports=a}),null);
__d("LSVerifyCommunityMemberContextualProfileExists",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.db.table(216).fetch([[[a[0],a[1]]]]).next().then(function(e,f){f=e.done;e=e.value;return f?(d[1]=new c.Map(),d[1].set("community_id",a[1]),d[1].set("user_id",a[0]),d[2]=c.toJSON(d[1]),c.storedProcedure(b("LSIssueNewTask"),"load_contextual_profile",c.i64.cast([0,548]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):(e.item,0)})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxVerifyCommunityMemberContextualProfileExistsStoredProcedure";e.exports=a}),null);/*FB_PKG_DELIM*/
__d("LSDeleteThenInsertAdminApprovalRequest",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.filter(b.db.table(26).fetch([[[a[0],a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.contactId,a[1])&&b.i64.gt(c.authorityLevel,a[3])}).next().then(function(c){var d=c.done;c.value;return d?b.db.table(26).put({threadKey:a[0],contactId:a[1],authorityLevel:a[3],subscribeSource:a[2]}):0})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxDeleteThenInsertAdminApprovalRequestStoredProcedure";e.exports=a}),null);
;/*FB_PKG_DELIM*/

__d("GridStoryAlbumUtils",["ReactComposerCollageLayoutSelection"],(function(a,b,c,d,e,f,g){"use strict";var h=1.01;function a(a,b,c){var d=a.columnSpan,e=a.columnStart,f=a.rowSpan;a=a.rowStart;return{bottom:"calc(("+(c-(a+f))*100+"% / "+c+") + "+(a+f<c?h:0)+"px)",left:"calc(("+e*100+"% / "+b+") + "+(e>0?h:0)+"px)",right:"calc(("+(b-(e+d))*100+"% / "+b+") + "+(e+d<b?h:0)+"px)",top:"calc(("+a*100+"% / "+c+") + "+(a>0?h:0)+"px)"}}function b(a){var b=d("ReactComposerCollageLayoutSelection").getBestUserCollageLayout(a.reduce(function(a,b,c){a.set(c,[(c=(c=b.media)==null?void 0:(c=c.image)==null?void 0:c.width)!=null?c:0,(c=(c=b.media)==null?void 0:(b=c.image)==null?void 0:b.height)!=null?c:0]);return a},new Map()));b=Array.from(b.entries()).map(function(b){var c=b[0];b=b[1];return{attachment:a[c],columnSpan:b.getWidth(),columnStart:b.getLeft(),rowSpan:b.getHeight(),rowStart:b.getTop()}});var c=b.reduce(function(a,b){return Math.max(a,b.columnStart+b.columnSpan)},0),e=b.reduce(function(a,b){return Math.max(a,b.rowStart+b.rowSpan)},0);return[b,c,e]}g.getStylesForGridCell=a;g.getLayoutForAttachments=b}),98);
__d("ProfileCometTimelineGridStoryAlbumAttachmentStyle_styleTypeRenderer.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[{kind:"RootArgument",name:"gridMediaWidth"},{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"ProfileCometTimelineGridStoryAlbumAttachmentStyle_styleTypeRenderer",selections:[{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachment",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"first",value:5}],concreteType:"SubattachmentsConnection",kind:"LinkedField",name:"all_subattachments",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Variable",name:"width",variableName:"gridMediaWidth"}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_playable",storageKey:null},{kind:"InlineFragment",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"accessibility_caption",storageKey:null},{alias:null,args:null,concreteType:"Vect2",kind:"LinkedField",name:"focus",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null}],type:"Photo",abstractKey:null},{kind:"InlineFragment",selections:[a],type:"Video",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:"all_subattachments(first:5)"}],storageKey:null}],type:"StoryAttachmentAlbumStyleRenderer",abstractKey:null}}();e.exports=a}),null);
__d("ProfileCometTimelineGridStoryAlbumAttachmentStyle.react",["fbt","ix","CometFeedFocusImage.react","CometImage.react","CometRelay","GridStoryAlbumUtils","ProfileCometTimelineGridStoryAlbumAttachmentStyle_styleTypeRenderer.graphql","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=(k||(k=d("react"))).c,m=k,n=1.4;function a(a){var e,f=l(10);a=a.styleTypeRenderer;a=d("CometRelay").useFragment(j!==void 0?j:j=b("ProfileCometTimelineGridStoryAlbumAttachmentStyle_styleTypeRenderer.graphql"),a);a=a.attachment;if(f[0]!==(a==null?void 0:(e=a.all_subattachments)==null?void 0:e.nodes)){var g;e=(e=a==null?void 0:(e=a.all_subattachments)==null?void 0:e.nodes)!=null?e:[];f[0]=a==null?void 0:(g=a.all_subattachments)==null?void 0:g.nodes;f[1]=e}else e=f[1];if(f[2]!==e||f[3]!==(a==null?void 0:(g=a.all_subattachments)==null?void 0:g.count)){var k;g=e.filter(o);k=(a==null?void 0:(k=a.all_subattachments)==null?void 0:k.count)||0;var p=k===g.length?0:k-g.length+1;k=d("GridStoryAlbumUtils").getLayoutForAttachments(g);var q=k[0],r=k[1],s=k[2];f[6]===Symbol["for"]("react.memo_cache_sentinel")?(g="x1jx94hy x5yr21d x1n2onr6 xh8yej3",f[6]=g):g=f[6];k=q.map(function(a,b){var e,f=a.attachment.media;if(!f||!f.image||f.image.uri==null)return null;e=m.jsx(c("CometFeedFocusImage.react"),{alt:(e=f.accessibility_caption)!=null?e:"",focusX:(e=(e=f.focus)==null?void 0:e.x)!=null?e:.5,focusY:(e=(e=f.focus)==null?void 0:e.y)!=null?e:.5,imageHeight:(e=f.image.height)!=null?e:0,imageWidth:(e=f.image.width)!=null?e:0,src:f.image.uri,viewportAspectRatio:a.columnSpan/r/(a.rowSpan/s)*n});b=p>0&&b===q.length-1;return m.jsxs("div",{className:"x6ikm8r x10wlt62 x10l6tqk",style:d("GridStoryAlbumUtils").getStylesForGridCell(a,r,s),children:[e,b&&m.jsx("div",{className:"x1lxk4cn x1ey2m1c x9f619 x5yr21d xds687c x17qophe x10l6tqk x13vifvy xh8yej3",children:m.jsx("div",{className:"x9f619 x17z8epw xngnso2 x1s688f x1nrll8i x10l6tqk xwa60dl x11lhmoz",children:h._("__JHASH__prDy-Vl64yo__JHASH__",[h._param("num",p)])})}),f.is_playable===!0&&!b&&m.jsx("div",{className:"x9f619 x1nrll8i x10l6tqk xwa60dl x11lhmoz",children:m.jsx(c("CometImage.react"),{height:24,src:i("354763"),width:24})})]},f.id)});f[2]=e;f[3]=a==null?void 0:(e=a.all_subattachments)==null?void 0:e.count;f[4]=g;f[5]=k}else g=f[4],k=f[5];f[7]!==g||f[8]!==k?(a=m.jsx("div",{className:g,children:k}),f[7]=g,f[8]=k,f[9]=a):a=f[9];return a}function o(a){a=a==null?void 0:a.media;if(!a)return!1;a=(a=a.image)==null?void 0:a.uri;return a==null?!1:!0}g["default"]=a}),226);
__d("ProfileCometTimelineGridStoryAlbumAttachmentStyle_styleTypeRenderer$normalization.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b=[a];return{kind:"SplitOperation",metadata:{},name:"ProfileCometTimelineGridStoryAlbumAttachmentStyle_styleTypeRenderer$normalization",selections:[{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachment",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"first",value:5}],concreteType:"SubattachmentsConnection",kind:"LinkedField",name:"all_subattachments",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:[{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Variable",name:"width",variableName:"gridMediaWidth"}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_playable",storageKey:null},{kind:"InlineFragment",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"accessibility_caption",storageKey:null},{alias:null,args:null,concreteType:"Vect2",kind:"LinkedField",name:"focus",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null}],type:"Photo",abstractKey:null},{kind:"InlineFragment",selections:b,type:"Video",abstractKey:null},{kind:"InlineFragment",selections:b,type:"Node",abstractKey:"__isNode"},{kind:"InlineFragment",selections:b,type:"DynamicFeedAdAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:b,type:"GenericAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:b,type:"MontageImage",abstractKey:null},{kind:"InlineFragment",selections:b,type:"MontageVideo",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:"all_subattachments(first:5)"}],storageKey:null}]}}();e.exports=a}),null);